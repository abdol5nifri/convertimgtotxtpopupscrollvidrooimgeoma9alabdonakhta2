<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Text to Image — Stylish UI</title>
<style>
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #1a1a2e;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 20px;
    overflow-x: hidden;
  }
  .container {
    max-width: 900px;
    width: 100%;
  }
  h1 {
    text-align: center;
    margin-bottom: 20px;
    color: #e0e0ff;
    text-shadow: 0 0 10px #8e8eff;
  }
  .description-box {
    text-align: center;
    margin-bottom: 20px;
  }
  .description-box h2 {
    font-size: 24px;
    margin-bottom: 5px;
    color: #fff;
  }
  .description-box p {
    font-size: 16px;
    opacity: 0.8;
    line-height: 1.5;
  }
  textarea, input, select, button {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    border-radius: 12px;
    border: none;
    background: #2a2a40;
    color: #fff;
    font-size: 16px;
  }
  textarea::placeholder {
    color: #bbb;
  }
  textarea:focus, input:focus, select:focus {
    outline: none;
    box-shadow: 0 0 10px #8e8eff;
  }
  label {
    font-size: 14px;
    opacity: 0.85;
    margin-bottom: 5px;
  }
  .row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
  }
  button {
    cursor: pointer;
    background: #6a5acd;
    font-weight: bold;
    transition: 0.3s;
  }
  button:hover {
    background: #836fff;
  }
  canvas {
    width: 100%;
    max-width: 100%;
    margin-top: 20px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    display: none;
  }
  .color-label {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 14px;
  }
  .color-label span {
    display: inline-block;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background-color: blue;
    cursor: pointer;
  }
  .article-section, .image-gallery {
    max-width: 900px;
    width: 100%;
    margin-top: 40px;
    padding: 20px;
    background: #1a1a2e;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  }
  .article-section h3, .image-gallery h3 {
    text-align: center;
    font-size: 28px;
    margin-bottom: 15px;
    color: #e0e0ff;
  }
  .article-section p {
    font-size: 16px;
    line-height: 1.8;
    margin-bottom: 20px;
    direction: rtl;
    text-align: right;
  }
  .image-gallery {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
  }
  .image-gallery img {
    max-width: 100%;
    height: auto;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  }

  /* POPUP STYLES */
  .popup-container {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }
  .popup {
    display: none;
    background-color: #fefefe;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    text-align: center;
    max-width: 90%;
    max-height: 90%;
    overflow-y: auto;
    position: relative;
  }
  .popup h3 {
    color: #333;
    margin-top: 0;
    margin-bottom: 15px;
  }
  .popup p {
    color: #666;
    line-height: 1.6;
    margin-bottom: 10px;
  }
  .popup video {
    max-width: 100%;
    height: auto;
    border-radius: 5px;
    margin-bottom: 15px;
  }
  .close-button {
    color: #aaa;
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
  }
  .close-button:hover, .close-button:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
  }
  .popup-button {
    background-color: #5cb85c;
    color: white;
    padding: 12px 24px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s ease;
    margin-top: 20px;
  }
  .popup-button:hover {
    background-color: #4cae4c;
  }

  @media (max-width: 600px) {
    .popup {
      padding: 15px;
    }
    .popup h3 {
      font-size: 20px;
      margin-bottom: 10px;
    }
    .popup p {
      font-size: 14px;
    }
    .popup-button {
      font-size: 14px;
      padding: 10px 20px;
    }
    .close-button {
      font-size: 24px;
      top: 8px;
      right: 12px;
    }
  }

  @media (min-width: 768px) {
    body {
        justify-content: flex-start;
        padding-top: 50px;
    }
  }
</style>
</head>
<body>
<div class="container">
  <h1>حوّل نصوصك إلى صور جذابة</h1>
  <div class="description-box">
    <h2>أداة تحويل النص إلى صورة</h2>
    <p>صمم صورًا احترافية من نصوصك في ثوانٍ. تحكم في كل شيء: الخط، اللون، الخلفية، والحجم.</p>
  </div>
  <label for="text">اكتب نصك هنا (متعدد الأسطر)</label>
  <textarea id="text" rows="6" placeholder="اكتب هنا النص الذي تريد تحويله إلى صورة..."></textarea>
  <div class="row">
    <div class="color-label">
      <label for="textColor">لون الخط</label>
      <span id="textPreview"></span>
      <input type="color" id="textColor" value="#ffffff" style="display:none;" />
    </div>
    <div class="color-label">
      <label for="bgColor">لون الخلفية</label>
      <span id="bgPreview"></span>
      <input type="color" id="bgColor" value="#000000" style="display:none;" />
    </div>
  </div>
  <div class="row">
    <div>
      <label for="fontSize">حجم الخط (px)</label>
      <input type="number" id="fontSize" value="40" min="10" max="240" />
    </div>
    <div>
      <label for="lineHeight">المسافة بين الأسطر (×)</label>
      <input type="number" id="lineHeight" value="1.4" min="1" step="0.1" max="3" />
    </div>
  </div>
  <div class="row">
    <div>
      <label for="align">محاذاة النص</label>
      <select id="align">
        <option value="left">يسار</option>
        <option value="center" selected>وسط</option>
        <option value="right">يمين</option>
      </select>
    </div>
    <div>
      <label for="scale">جودة الصورة (DPI)</label>
      <input type="number" id="scale" value="3" min="1" max="10" />
    </div>
  </div>
<button id="renderBtn">إنشاء الصورة</button>
<button id="downloadBtn">تحميل الصورة</button>

<canvas id="canvas" width="800" height="500"></canvas>

</div>

<div class="article-section">
  <h3>لماذا تحتاج إلى أداة تحويل النص إلى صورة؟</h3>
  <p>
    في عالم أصبح فيه المحتوى المرئي ملكاً، تحويل الأفكار والنصوص إلى صور جذابة لم يعد مجرد رفاهية، بل أصبح ضرورة. سواء كنت مسوقاً، صانع محتوى، أو حتى مستخدماً عادياً، فإن أداة تحويل النص إلى صورة توفر لك حلاً سحرياً لتلك المشكلة.
  </p>
  <p>
    تخيل أن لديك اقتباساً جميلاً أو إعلاناً مهماً وتريد مشاركته على منصات التواصل الاجتماعي مثل انستغرام أو فيسبوك. استخدام برامج تصميم معقدة مثل فوتوشوب يمكن أن يكون مضيعة للوقت ومكلفاً إذا لم تكن مصممًا محترفًا. هنا يأتي دور هذه الأداة البسيطة والفعالة. بفضل واجهتها السهلة، يمكنك إنشاء صور احترافية في ثوانٍ، دون الحاجة لأي خبرة سابقة.
  </p>
  <p>
    تمنحك الأداة تحكمًا كاملاً في عناصر التصميم الأساسية. يمكنك اختيار اللون المناسب للنص، وتغيير الخلفية لتتناسب مع رسالتك، والتحكم في حجم الخط والمسافات بين الأسطر لجعل النص سهل القراءة. والأهم من ذلك، يمكنك تحديد جودة الصورة النهائية، مما يضمن حصولك على صورة عالية الدقة جاهزة للطباعة أو للنشر على أي منصة.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>

  <h3>لماذا تحتاج إلى أداة تحويل النص إلى صورة؟</h3>
  <p>
    في عالم أصبح فيه المحتوى المرئي ملكاً، تحويل الأفكار والنصوص إلى صور جذابة لم يعد مجرد رفاهية، بل أصبح ضرورة. سواء كنت مسوقاً، صانع محتوى، أو حتى مستخدماً عادياً، فإن أداة تحويل النص إلى صورة توفر لك حلاً سحرياً لتلك المشكلة.
  </p>
  <p>
    تخيل أن لديك اقتباساً جميلاً أو إعلاناً مهماً وتريد مشاركته على منصات التواصل الاجتماعي مثل انستغرام أو فيسبوك. استخدام برامج تصميم معقدة مثل فوتوشوب يمكن أن يكون مضيعة للوقت ومكلفاً إذا لم تكن مصممًا محترفًا. هنا يأتي دور هذه الأداة البسيطة والفعالة. بفضل واجهتها السهلة، يمكنك إنشاء صور احترافية في ثوانٍ، دون الحاجة لأي خبرة سابقة.
  </p>
  <p>
    تمنحك الأداة تحكمًا كاملاً في عناصر التصميم الأساسية. يمكنك اختيار اللون المناسب للنص، وتغيير الخلفية لتتناسب مع رسالتك، والتحكم في حجم الخط والمسافات بين الأسطر لجعل النص سهل القراءة. والأهم من ذلك، يمكنك تحديد جودة الصورة النهائية، مما يضمن حصولك على صورة عالية الدقة جاهزة للطباعة أو للنشر على أي منصة.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>

  <h3>لماذا تحتاج إلى أداة تحويل النص إلى صورة؟</h3>
  <p>
    في عالم أصبح فيه المحتوى المرئي ملكاً، تحويل الأفكار والنصوص إلى صور جذابة لم يعد مجرد رفاهية، بل أصبح ضرورة. سواء كنت مسوقاً، صانع محتوى، أو حتى مستخدماً عادياً، فإن أداة تحويل النص إلى صورة توفر لك حلاً سحرياً لتلك المشكلة.
  </p>
  <p>
    تخيل أن لديك اقتباساً جميلاً أو إعلاناً مهماً وتريد مشاركته على منصات التواصل الاجتماعي مثل انستغرام أو فيسبوك. استخدام برامج تصميم معقدة مثل فوتوشوب يمكن أن يكون مضيعة للوقت ومكلفاً إذا لم تكن مصممًا محترفًا. هنا يأتي دور هذه الأداة البسيطة والفعالة. بفضل واجهتها السهلة، يمكنك إنشاء صور احترافية في ثوانٍ، دون الحاجة لأي خبرة سابقة.
  </p>
  <p>
    تمنحك الأداة تحكمًا كاملاً في عناصر التصميم الأساسية. يمكنك اختيار اللون المناسب للنص، وتغيير الخلفية لتتناسب مع رسالتك، والتحكم في حجم الخط والمسافات بين الأسطر لجعل النص سهل القراءة. والأهم من ذلك، يمكنك تحديد جودة الصورة النهائية، مما يضمن حصولك على صورة عالية الدقة جاهزة للطباعة أو للنشر على أي منصة.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>

  <h3>لماذا تحتاج إلى أداة تحويل النص إلى صورة؟</h3>
  <p>
    في عالم أصبح فيه المحتوى المرئي ملكاً، تحويل الأفكار والنصوص إلى صور جذابة لم يعد مجرد رفاهية، بل أصبح ضرورة. سواء كنت مسوقاً، صانع محتوى، أو حتى مستخدماً عادياً، فإن أداة تحويل النص إلى صورة توفر لك حلاً سحرياً لتلك المشكلة.
  </p>
  <p>
    تخيل أن لديك اقتباساً جميلاً أو إعلاناً مهماً وتريد مشاركته على منصات التواصل الاجتماعي مثل انستغرام أو فيسبوك. استخدام برامج تصميم معقدة مثل فوتوشوب يمكن أن يكون مضيعة للوقت ومكلفاً إذا لم تكن مصممًا محترفًا. هنا يأتي دور هذه الأداة البسيطة والفعالة. بفضل واجهتها السهلة، يمكنك إنشاء صور احترافية في ثوانٍ، دون الحاجة لأي خبرة سابقة.
  </p>
  <p>
    تمنحك الأداة تحكمًا كاملاً في عناصر التصميم الأساسية. يمكنك اختيار اللون المناسب للنص، وتغيير الخلفية لتتناسب مع رسالتك، والتحكم في حجم الخط والمسافات بين الأسطر لجعل النص سهل القراءة. والأهم من ذلك، يمكنك تحديد جودة الصورة النهائية، مما يضمن حصولك على صورة عالية الدقة جاهزة للطباعة أو للنشر على أي منصة.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>

  <h3>لماذا تحتاج إلى أداة تحويل النص إلى صورة؟</h3>
  <p>
    في عالم أصبح فيه المحتوى المرئي ملكاً، تحويل الأفكار والنصوص إلى صور جذابة لم يعد مجرد رفاهية، بل أصبح ضرورة. سواء كنت مسوقاً، صانع محتوى، أو حتى مستخدماً عادياً، فإن أداة تحويل النص إلى صورة توفر لك حلاً سحرياً لتلك المشكلة.
  </p>
  <p>
    تخيل أن لديك اقتباساً جميلاً أو إعلاناً مهماً وتريد مشاركته على منصات التواصل الاجتماعي مثل انستغرام أو فيسبوك. استخدام برامج تصميم معقدة مثل فوتوشوب يمكن أن يكون مضيعة للوقت ومكلفاً إذا لم تكن مصممًا محترفًا. هنا يأتي دور هذه الأداة البسيطة والفعالة. بفضل واجهتها السهلة، يمكنك إنشاء صور احترافية في ثوانٍ، دون الحاجة لأي خبرة سابقة.
  </p>
  <p>
    تمنحك الأداة تحكمًا كاملاً في عناصر التصميم الأساسية. يمكنك اختيار اللون المناسب للنص، وتغيير الخلفية لتتناسب مع رسالتك، والتحكم في حجم الخط والمسافات بين الأسطر لجعل النص سهل القراءة. والأهم من ذلك، يمكنك تحديد جودة الصورة النهائية، مما يضمن حصولك على صورة عالية الدقة جاهزة للطباعة أو للنشر على أي منصة.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>
  <p>
    باختصار، هذه الأداة هي الحل الأمثل لتحويل الأفكار إلى إبداعات بصرية. إنها توفر الوقت والجهد، وتفتح الباب أمام الجميع لإنشاء محتوى مرئي جذاب ومؤثر، من دون أي قيود تقنية.
  </p>
</div>

<div class="image-gallery">
  <h3>أمثلة من أعمالنا</h3>
  <img src="http://googleusercontent.com/image_generation_content/33" alt="صورة تم إنشاؤها بالذكاء الاصطناعي"/>
</div>

<div id="popupContainer" class="popup-container">
  <div id="popup" class="popup">
    <span class="close-button" id="closePopupBtn">&times;</span>
    <h3>تخفيضات نهاية السنة!</h3>
    <video controls poster="https://i.postimg.cc/7hmmBvsy/4873159.jpg" style="max-width: 100%; height: auto; border-radius: 5px; margin-bottom: 15px;">
      <source src="https://example.com/your-video.mp4" type="video/mp4">
      المتصفح ديالك ما كيدعمش عرض الفيديو.
    </video>
    <p>استفد من تخفيضات هائلة على جميع منتجاتنا.</p>
    <p>لا تفوت الفرصة! العرض محدود.</p>
    <button id="popupButton" class="popup-button">اكتشف العروض الآن</button>
  </div>
</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const padding = 20;

const textColorInput = document.getElementById('textColor');
const bgColorInput = document.getElementById('bgColor');
const textPreview = document.getElementById('textPreview');
const bgPreview = document.getElementById('bgPreview');

textPreview.addEventListener('click', ()=>textColorInput.click());
bgPreview.addEventListener('click', ()=>bgColorInput.click());

textColorInput.addEventListener('input', ()=>{
    textPreview.style.backgroundColor = textColorInput.value;
});
bgColorInput.addEventListener('input', ()=>{
    bgPreview.style.backgroundColor = bgColorInput.value;
});

function wrapText(context, text, maxWidth) {
    const lines = [];
    const paragraphs = text.split('\n');
    context.direction = 'rtl'; // إضافة مهمة لدعم الكتابة من اليمين لليسار

    paragraphs.forEach(paragraph => {
        let words = paragraph.split(' ');
        if (words.length === 0 || paragraph.length === 0) {
            lines.push('');
            return;
        }

        let currentLine = words[0];
        for (let i = 1; i < words.length; i++) {
            let word = words[i];
            let testLine = currentLine + " " + word;
            if (context.measureText(testLine).width < maxWidth) {
                currentLine = testLine;
            } else {
                lines.push(currentLine);
                currentLine = word;
            }
        }
        lines.push(currentLine);
    });
    return lines;
}

function calculateCanvasHeight(context, text, fontSize, lineHeight, maxWidth) {
    context.font = fontSize + 'px Arial';
    const lines = wrapText(context, text, maxWidth);
    return lines.length * lineHeight + padding * 2;
}

function renderPreview() {
    const text = document.getElementById('text').value;
    const fontSize = parseInt(document.getElementById('fontSize').value);
    const lineHeight = parseFloat(document.getElementById('lineHeight').value) * fontSize;
    const textColor = textColorInput.value;
    const bgColor = bgColorInput.value;
    const align = document.getElementById('align').value;
    const maxWidth = canvas.width - 2 * padding;

    canvas.height = calculateCanvasHeight(ctx, text, fontSize, lineHeight, maxWidth);

    ctx.fillStyle = bgColor;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = textColor;
    ctx.font = fontSize + 'px Arial';
    const lines = wrapText(ctx, text, maxWidth);
    ctx.direction = 'rtl'; // إضافة مهمة لدعم الكتابة من اليمين لليسار

    let y = padding;
    const x = align === 'center' ? canvas.width / 2 : (align === 'right' ? canvas.width - padding : padding);

    lines.forEach(line => {
        ctx.textAlign = align;
        ctx.textBaseline = 'top';
        ctx.fillText(line, x, y);
        y += lineHeight;
    });

    canvas.style.display = 'block';
}

function downloadImage() {
    const text = document.getElementById('text').value;
    const fontSize = parseInt(document.getElementById('fontSize').value);
    const lineHeight = parseFloat(document.getElementById('lineHeight').value) * fontSize;
    const textColor = textColorInput.value;
    const bgColor = bgColorInput.value;
    const align = document.getElementById('align').value;
    const scale = parseInt(document.getElementById('scale').value);

    const offCanvasWidth = 800 * scale;
    const offCanvasPadding = padding * scale;
    const offCanvasMaxWidth = offCanvasWidth - 2 * offCanvasPadding;

    const offCanvas = document.createElement('canvas');
    const offCtx = offCanvas.getContext('2d');

    offCtx.font = fontSize * scale + 'px Arial';
    const lines = wrapText(offCtx, text, offCanvasMaxWidth);
    offCanvas.width = offCanvasWidth;
    offCanvas.height = lines.length * (lineHeight * scale) + offCanvasPadding * 2;

    offCtx.fillStyle = bgColor;
    offCtx.fillRect(0, 0, offCanvas.width, offCanvas.height);

    offCtx.fillStyle = textColor;
    offCtx.font = fontSize * scale + 'px Arial';
    offCtx.direction = 'rtl'; // إضافة مهمة لدعم الكتابة من اليمين لليسار

    const x = align === 'center' ? offCanvas.width / 2 : (align === 'right' ? offCanvas.width - offCanvasPadding : offCanvasPadding);
    let y = offCanvasPadding;

    lines.forEach(line => {
        offCtx.textAlign = align;
        offCtx.textBaseline = 'top';
        offCtx.fillText(line, x, y);
        y += lineHeight * scale;
    });

    const link = document.createElement('a');
    link.download = 'text-image.png';
    link.href = offCanvas.toDataURL('image/png');
    link.click();
}

document.getElementById('renderBtn').addEventListener('click', renderPreview);
document.getElementById('downloadBtn').addEventListener('click', downloadImage);

// Popup JS
document.addEventListener('DOMContentLoaded', function() {
  const popupContainer = document.getElementById('popupContainer');
  const popup = document.getElementById('popup');
  const closePopupBtn = document.getElementById('closePopupBtn');
  const popupButton = document.getElementById('popupButton');
  
  const showPopupOnScroll = () => {
    // Check if the scroll position has reached the halfway point of the body
    const halfPage = document.body.scrollHeight / 2;
    if (window.scrollY >= halfPage) {
      // Step 1: Show the blurry container
      popupContainer.style.display = 'flex';
      
      // Step 2: After a small delay, show the popup content
      setTimeout(() => {
        popup.style.display = 'block';
      }, 500); // 0.5 second delay for a better visual effect

      // Remove the event listener so the popup only appears once
      window.removeEventListener('scroll', showPopupOnScroll);
    }
  };

  window.addEventListener('scroll', showPopupOnScroll);

  closePopupBtn.addEventListener('click', () => {
    popupContainer.style.display = 'none';
    popup.style.display = 'none';
  });

  // هذا هو الكود اللي كيخلي الـ popup يختفي ملي كتكليكي على برا ديالو
  window.addEventListener('click', (event) => {
    if (event.target == popupContainer) {
      popupContainer.style.display = 'none';
      popup.style.display = 'none';
    }
  });

  popupButton.addEventListener('click', () => {
    window.open('https://example.com', '_blank'); // بدل هذا الرابط بالرابط لي بغيتي
  });
});
</script>
</body>
  </html>
